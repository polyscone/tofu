{{define "com_pagination"}}

{{$book := .ComData.Book}}

{{if $book}}
	{{$startEntry := Add 1 (Mul $book.PageSize (Sub $book.Page.Number 1))}}
	{{$endEntry := Add (Sub $startEntry 1) (len $book.Page.Rows)}}

	<nav class="pagination">
		<div class="pagination__info">
			{{if len $book.Page.Rows}}
				{{if eq $startEntry $endEntry}}
					Showing entry <span data-locale-number>{{$startEntry}}</span> of <span data-locale-number>{{$book.TotalRows}}</span>
				{{else}}
					Showing entries <span data-locale-number>{{$startEntry}}</span>-<span data-locale-number>{{$endEntry}}</span> of <span data-locale-number>{{$book.TotalRows}}</span>
				{{end}}
			{{end}}
		</div>

		<ul class="pagination__links">
			{{if and (len $book.Page.Rows) (gt $book.TotalPages 1)}}
				{{if gt $book.Page.Number 1}}
					<li><a href="{{.URL.Query.Replace "page" "1"}}" aria-label="First page">&laquo; First</a></li>
					<li><a href="{{.URL.Query.Replace "page" (Sub $book.Page.Number 1)}}" aria-label="Previous page">&lt; Prev</a></li>
				{{end}}

				{{range $i := Ints (Sub $book.Page.Number 2) (Add $book.Page.Number 3)}}
					{{if and (gt $i 0) (le $i $book.TotalPages)}}
						{{$isActive := eq (printf "%v" $i) ($.URL.Query.Get "page")}}
						<li>
							<a
								href="{{$.URL.Query.Replace "page" $i}}"
								aria-label="Page {{$i}}"
								data-locale-number
								{{if $isActive}}class="pagination__active"{{end}}
							>{{$i}}</a>
						</li>
					{{end}}
				{{end}}

				{{if lt $book.Page.Number $book.TotalPages}}
					<li><a href="{{.URL.Query.Replace "page" (Add $book.Page.Number 1)}}" aria-label="Next page">Next &gt;</a></li>
					<li><a href="{{.URL.Query.Replace "page" $book.TotalPages}}" aria-label="Last page">Last &raquo;</a></li>
				{{end}}
			{{else if not (eq $book.Page.Number 1)}}
				<li><a href="{{.URL.Query.Replace "page" (Sub $book.Page.Number 1)}}" aria-label="Previous page">&lt; Prev</a></li>
				<li><a href="{{.URL.Query.Replace "page" "1"}}">Go to the first page</a></li>
			{{end}}
		</ul>
	</nav>
{{else}}
	<p>Pagination component: required fields: Book.</p>
{{end}}

{{end}}
