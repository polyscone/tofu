{{define "view_head"}}

<div class="center">
	{{if .ErrorMessage}}
		<h1>Account activation error</h1>
	{{else if .URL.Query.Get "token"}}
		<h1>Account activation</h1>
	{{else}}
		<h1>Account activation error</h1>
	{{end}}
</div>

{{end}}

{{define "view_body"}}

<div class="center">
	{{if .ErrorMessage}}
		<p>Either the account you're trying to activate has already been activated or you've provided an invalid activation token.</p>
	{{else if .URL.Query.Get "token"}}
		<p>You just need to choose a password and then we can activate your account.</p>

		<details>
			<summary>How do I choose a good password?</summary>

			<p>
				A good pass<u>word</u> should be long, but even better is a long pass<u>phrase</u>.
				Passphrases can be normal sentences, making them easier for you to remember, but making it hard for other people to guess.
			</p>
			<p>It's okay to use spaces in the form below, so why not try coming up with a memorable passphrase to use now?</p>
		</details>

		<form action="{{Path "account.activate.post"}}" method="POST" id="account-activate-form">
			<input type="hidden" name="_csrf" value="{{.CSRF.Token}}">
			<input type="hidden" name="token" value="{{.URL.Query.Get "token"}}">

			<label for="activate__password">Choose a password</label>
			<input id="activate__password" type="password" name="password" value="{{.Form.Get "password"}}" placeholder="password" autocomplete="current-password" required pattern="[ -~]{8,100}" minlength="8" maxlength="100">
			<p class="error">{{.Errors.Get "password"}}</p>

			<div class="bag reverse">
				<button type="submit">Use this password and activate account</button>
			</div>
		</form>
	{{else}}
		<p>An account can't be activated without an activation token.</p>
	{{end}}
</div>

{{end}}
