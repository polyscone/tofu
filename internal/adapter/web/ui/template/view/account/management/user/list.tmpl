{{define "view_head"}}

<h1>User management</h1>

<form class="bag">
	<input type="search" aria-label="Search" name="search" value="{{.URL.Query.Get "search"}}" placeholder="Search" class="grow">
	<button>Search</button>
</form>

{{end}}

{{define "view_body"}}

<table class="management">
	<tr>
		<th>Email</th>
		<th>Last sign in</th>
		<th></th>
	</tr>

	{{range .Vars.Users.Page.Rows}}
		<tr{{if eq .ID $.Vars.HighlightID}} class="management__highlight"{{end}}>
			<td><a href="mailto:{{.Email}}">{{.Email}}</a></td>
			<td>
				{{if not .LastSignedInAt.IsZero}}
					<time datetime="{{FormatTime .LastSignedInAt "RFC3339"}}" data-date="full">{{FormatTime .LastSignedInAt "DateTime"}}</time>
					({{.LastSignedInMethod}})
				{{end}}
			</td>
			<td class="text-right"><a href="{{Path "account.management.user.edit" ":userID" .ID}}{{$.URL.Query.String}}">Edit</a></td>
		</tr>
	{{else}}
		<tr class="management__empty">
			<td colspan="3">No users found</td>
		</tr>
	{{end}}
</table>

{{template "com_pagination" .ComData .Vars.Users}}

{{end}}
